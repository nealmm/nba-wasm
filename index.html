<!doctypehtml><html lang=en-US><head><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>NanoBoyAdvance</title><script src="coi-serviceworker.js"></script><style>html{width:100dvw;height:100dvh;-webkit-user-select:none}body{margin:0;width:100%;height:100%;overflow:hidden;background-color:#000}#display{width:100%;height:100%;display:flex;justify-content:center;align-items:center}#canvas{aspect-ratio:3/2;background-color:#000}@media (aspect-ratio <= 3/2){#canvas{width:100%;height:auto}}@media (aspect-ratio > 3/2){#canvas{width:auto;height:100%}}.controls{width:38mm;height:70mm;position:absolute;bottom:0}#left-controls{left:0}#right-controls{right:0}</style></head><body><dialog id=file-dialog><label for=file-input>Select a ROM file:</label><input id=file-input name=file-input type=file><button id=file-submit-button>Play</button></dialog><div id=display><canvas id=canvas></canvas></div><div id=controls-container hidden><svg class=controls id=left-controls viewBox="0 0 38 70"><rect fill=lightgray height=8 id=l-button rx=2 width=20 x=0 y=0 /><polygon fill=lightgray id=up-button points="16,25 19,22 19,16 13,16 13,22"/><polygon fill=lightgray id=down-button points="16,25 19,28 19,34 13,34 13,28"/><polygon fill=lightgray id=left-button points="16,25 13,28 7,28 7,22 13,22"/><polygon fill=lightgray id=right-button points="16,25 19,22 25,22 25,28 19,28"/><rect fill=lightgray height=3 id=select-button rx=1 width=8 x=29 y=45 /></svg><svg class=controls id=right-controls viewBox="0 0 38 70"><rect fill=lightgray height=8 id=r-button rx=2 width=20 x=18 y=0 /><circle cx=28 cy=23 fill=lightgray id=a-button r=4 /><circle cx=13 cy=28 fill=lightgray id=b-button r=4 /><rect fill=lightgray height=3 id=start-button rx=1 width=8 x=1 y=45 /></svg></div><script>var Module={canvas:document.getElementById("canvas"),noInitialRun:!0,preRun:[()=>{FS.mkdir("saves"),FS.mount(IDBFS,{},"saves"),FS.syncfs(!0,(()=>{}));const e=document.getElementById("file-dialog"),t=document.getElementById("file-input"),u=document.getElementById("file-submit-button");e.showModal(),u.addEventListener("click",(async()=>{if(1!=t.files.length)alert("Select a ROM file.");else{const u=t.files[0],o=new Uint8Array(await u.arrayBuffer()),a=FS.open(u.name,"w+");FS.write(a,o,0,o.length),FS.close(a),e.close(),Module.callMain([u.name])}}))}],onRuntimeInitialized:function(){if(document.addEventListener("keydown",(e=>{if(!e.repeat)switch(e.code){case"KeyW":case"KeyW":Module.setKeyStatus(Module.Key.Up,!0);break;case"KeyS":Module.setKeyStatus(Module.Key.Down,!0);break;case"KeyA":Module.setKeyStatus(Module.Key.Left,!0);break;case"KeyD":Module.setKeyStatus(Module.Key.Right,!0);break;case"KeyL":Module.setKeyStatus(Module.Key.A,!0);break;case"KeyK":Module.setKeyStatus(Module.Key.B,!0);break;case"ShiftLeft":case"ShiftLeft":Module.setKeyStatus(Module.Key.L,!0);break;case"ShiftRight":Module.setKeyStatus(Module.Key.R,!0);break;case"KeyZ":Module.setKeyStatus(Module.Key.Start,!0);break;case"KeyX":Module.setKeyStatus(Module.Key.Select,!0)}})),document.addEventListener("keyup",(e=>{switch(e.code){case"KeyW":case"KeyW":Module.setKeyStatus(Module.Key.Up,!1);break;case"KeyS":Module.setKeyStatus(Module.Key.Down,!1);break;case"KeyA":Module.setKeyStatus(Module.Key.Left,!1);break;case"KeyD":Module.setKeyStatus(Module.Key.Right,!1);break;case"KeyL":Module.setKeyStatus(Module.Key.A,!1);break;case"KeyK":Module.setKeyStatus(Module.Key.B,!1);break;case"ShiftLeft":case"ShiftLeft":Module.setKeyStatus(Module.Key.L,!1);break;case"ShiftRight":Module.setKeyStatus(Module.Key.R,!1);break;case"KeyZ":Module.setKeyStatus(Module.Key.Start,!1);break;case"KeyX":Module.setKeyStatus(Module.Key.Select,!1)}})),"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){const e=document.getElementById("controls-container");e.hidden=!1;const t=window.matchMedia("(orientation: portrait)");t.matches&&(document.getElementById("display").style.height="50%"),t.addEventListener("change",(e=>{e.matches?document.getElementById("display").style.height="50%":document.getElementById("display").style.height="100%"}));const u=e=>{switch(e){case"up-button":Module.setKeyStatus(Module.Key.Up,!0);break;case"down-button":Module.setKeyStatus(Module.Key.Down,!0);break;case"left-button":Module.setKeyStatus(Module.Key.Left,!0);break;case"right-button":Module.setKeyStatus(Module.Key.Right,!0);break;case"start-button":Module.setKeyStatus(Module.Key.Start,!0);break;case"select-button":Module.setKeyStatus(Module.Key.Select,!0);break;case"a-button":Module.setKeyStatus(Module.Key.A,!0);break;case"b-button":Module.setKeyStatus(Module.Key.B,!0);break;case"l-button":Module.setKeyStatus(Module.Key.L,!0);break;case"r-button":Module.setKeyStatus(Module.Key.R,!0)}},o=e=>{switch(e){case"up-button":Module.setKeyStatus(Module.Key.Up,!1);break;case"down-button":Module.setKeyStatus(Module.Key.Down,!1);break;case"left-button":Module.setKeyStatus(Module.Key.Left,!1);break;case"right-button":Module.setKeyStatus(Module.Key.Right,!1);break;case"start-button":Module.setKeyStatus(Module.Key.Start,!1);break;case"select-button":Module.setKeyStatus(Module.Key.Select,!1);break;case"a-button":Module.setKeyStatus(Module.Key.A,!1);break;case"b-button":Module.setKeyStatus(Module.Key.B,!1);break;case"l-button":Module.setKeyStatus(Module.Key.L,!1);break;case"r-button":Module.setKeyStatus(Module.Key.R,!1)}},a={};e.addEventListener("touchstart",(e=>{for(touch of e.changedTouches)a[touch.identifier]=touch.target,u(touch.target.id)})),e.addEventListener("touchend",(e=>{for(touch of e.changedTouches)delete a[touch.identifier],o(touch.target.id)})),e.addEventListener("touchmove",(e=>{for(touch of e.changedTouches){const e=document.elementFromPoint(touch.clientX,touch.clientY);a[touch.identifier]!=e&&(o(a[touch.identifier].id),a[touch.identifier]=e,u(e.id))}})),e.addEventListener("touchcancel",(e=>{for(touch of e.changedTouches)delete a[touch.identifier],o(touch.target.id)}))}}()}</script><script async src=NanoBoyAdvance.js></script></body></html>